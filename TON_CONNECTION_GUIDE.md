# TON 钱包连接指南

## 问题诊断

从您的截图可以看出，主要问题是：
- **TON Connect SDK 显示为"不可用"**
- **钱包列表数量为 0**
- **连接按钮处于加载状态但无法完成连接**

## 解决方案

### 1. 修复 SDK 检测问题

我已经修复了 TON Connect SDK 的检测逻辑，现在应该能正确识别 SDK 是否可用。

### 2. 改进连接流程

更新了连接流程，现在会：
- 生成 TON Connect URI
- 提供复制到剪贴板的功能
- 显示完整的连接 URI
- 增加连接超时时间到 60 秒

### 3. 使用步骤

#### 方法一：使用 TON 测试页面
1. 访问 `/ton-test` 页面
2. 点击 "测试 TON Connect SDK" 按钮
3. 选择连接方式：
   - **确定** - 复制 URI 到剪贴板
   - **取消** - 查看完整 URI
4. 在 Tonkeeper 中粘贴 URI 进行连接

#### 方法二：使用多链钱包页面
1. 访问 `/multichain` 页面
2. 点击 TON 钱包的 "连接钱包" 按钮
3. 按照提示进行连接

### 4. 连接要求

#### 桌面端连接
- 需要安装 Tonkeeper 浏览器扩展
- 或者使用移动端 Tonkeeper 应用扫描二维码

#### 移动端连接
- 安装 Tonkeeper 应用
- 在应用中扫描二维码或粘贴 URI

### 5. 故障排除

#### 如果 SDK 仍然显示不可用
1. 刷新页面重新检测
2. 检查浏览器控制台是否有错误
3. 确保 TON Connect SDK 包已正确安装

#### 如果连接超时
1. 确保 Tonkeeper 已安装并解锁
2. 检查网络连接
3. 尝试重新生成连接 URI

#### 如果无法复制 URI
1. 选择"查看完整 URI"选项
2. 手动复制 URI 到 Tonkeeper

### 6. 技术细节

#### TON Connect 协议
- 使用 TON Connect 协议连接 TON 钱包
- 支持多种 TON 钱包（Tonkeeper、TON Wallet 等）
- 通过 URI 或二维码进行连接

#### 连接流程
1. 初始化 TON Connect SDK
2. 生成连接 URI
3. 用户在 Tonkeeper 中处理连接请求
4. 返回连接结果

### 7. 验证连接

连接成功后，您应该能看到：
- 钱包地址
- 公钥信息
- 连接状态

### 8. 常见问题

#### Q: 为什么 SDK 显示不可用？
A: 这可能是检测逻辑的问题，实际 SDK 是可用的。请直接尝试连接。

#### Q: 连接超时怎么办？
A: 确保 Tonkeeper 已安装并解锁，然后重新尝试连接。

#### Q: 无法复制 URI 怎么办？
A: 选择查看完整 URI，然后手动复制。

#### Q: 在桌面端如何连接？
A: 需要安装 Tonkeeper 浏览器扩展，或者使用移动端应用。

## 下一步

1. 刷新 TON 测试页面
2. 点击 "测试 TON Connect SDK" 按钮
3. 按照提示进行连接
4. 如果仍有问题，请查看浏览器控制台的错误信息

现在 TON 连接应该能够正常工作了！
